<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Шифрування RSA</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.0.0/jsencrypt.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            line-height: 1.6;
            background-color: #f9f9f9;
        }
        textarea, input, button {
            display: block;
            margin: 10px 0;
            width: 100%;
            max-width: 500px;
        }
        img {
            max-width: 100%;
            height: auto;
            margin: 20px 0;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        textarea {
            border: 1px solid #ccc;
            padding: 10px;
            resize: vertical;
        }
        input[type="text"] {
            padding: 8px;
            border: 1px solid #ccc;
        }
        h1, h2, h3 {
            color: #333;
        }
        p.quiz-result {
            font-weight: bold;
            margin: 5px 0;
        }
        section {
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
    <section>
        <h1>Шифрування та розшифрування RSA</h1>
        <p>RSA — це асиметричний криптографічний алгоритм, що використовує відкритий і закритий ключі для захисту даних.</p>
    </section>

    <section>
        <h2>Як працює RSA?</h2>
        <p>Алгоритм базується на складності розкладання великих чисел на прості множники.</p>
        <ol>
            <li>Обираються два великі прості числа \( p \) і \( q \).</li>
            <li>Обчислюється їх добуток \( n = p \times q \), який використовується у відкритому та закритому ключах.</li>
            <li>Обирається число \( e \) — відкритий ключ, взаємно просте з \( (p-1)(q-1) \).</li>
            <li>Обчислюється закритий ключ \( d \), що є мультиплікативно оберненим до \( e \) за модулем \( (p-1)(q-1) \).</li>
            <li>Шифрування: \( C = M^e \mod n \).</li>
            <li>Розшифрування: \( M = C^d \mod n \).</li>
        </ol>
    </section>

    <section>
        <h3>Ілюстрація роботи RSA</h3>
        <img src="https://s.dou.ua/storage-files/image_10819236841681390497150.png" alt="Схема роботи RSA">
    </section>

    <section>
        <h2>Історія RSA</h2>
        <p>RSA був винайдений у 1977 році Рональдом Рівестом, Аді Шаміром і Леонардом Адлеманом. Алгоритм названий за першими літерами їхніх прізвищ. RSA є одним із перших асиметричних криптографічних алгоритмів і широко використовується для захисту даних в інтернеті, зокрема в протоколах HTTPS, SSH та інших.</p>
    </section>

    <section>
        <h2>Демонстрація</h2>
        <p>Введіть текст у поле нижче та натисніть "Зашифрувати", щоб отримати зашифроване повідомлення. Потім вставте зашифрований текст у відповідне поле та натисніть "Розшифрувати", щоб повернути оригінальний текст.</p>
        <p><strong>Примітка:</strong> RSA призначений для шифрування невеликих повідомлень. Для великих даних використовуються гібридні схеми.</p>
        <textarea id="inputText" placeholder="Введіть текст"></textarea>
        <button onclick="encrypt()">Зашифрувати</button>
        <textarea id="encryptedText" placeholder="Зашифрований текст"></textarea>
        <button onclick="copyEncryptedText()">Копіювати зашифрований текст</button>
        <button onclick="decrypt()">Розшифрувати</button>
        <textarea id="decryptedText" placeholder="Розшифрований текст"></textarea>
    </section>

    <section>
        <h2>Квіз: Розшифруйте слова</h2>
        <p>Розшифруйте кожне з наведених зашифрованих слів за допомогою демонстрації та введіть правильні відповіді у відповідні поля.</p>

        <p><strong>Зашифроване слово 1:</strong></p>
        <textarea id="quizEncrypted1" readonly></textarea>
        <input type="text" id="quizAnswer1" placeholder="Введіть розшифроване слово 1">
        <p class="quiz-result" id="quizResult1"></p>

        <p><strong>Зашифроване слово 2:</strong></p>
        <textarea id="quizEncrypted2" readonly></textarea>
        <input type="text" id="quizAnswer2" placeholder="Введіть розшифроване слово 2">
        <p class="quiz-result" id="quizResult2"></p>

        <p><strong>Зашифроване слово 3:</strong></p>
        <textarea id="quizEncrypted3" readonly></textarea>
        <input type="text" id="quizAnswer3" placeholder="Введіть розшифроване слово 3">
        <p class="quiz-result" id="quizResult3"></p>

        <p><strong>Зашифроване слово 4:</strong></p>
        <textarea id="quizEncrypted4" readonly></textarea>
        <input type="text" id="quizAnswer4" placeholder="Введіть розшифроване слово 4">
        <p class="quiz-result" id="quizResult4"></p>

        <p><strong>Зашифроване слово 5:</strong></p>
        <textarea id="quizEncrypted5" readonly></textarea>
        <input type="text" id="quizAnswer5" placeholder="Введіть розшифроване слово 5">
        <p class="quiz-result" id="quizResult5"></p>

        <button onclick="checkQuizAnswers()">Перевірити всі відповіді</button>
    </section>

    <script>
        // Генерація ключів RSA при завантаженні сторінки
        const crypt = new JSEncrypt({ default_key_size: 1024 });
        crypt.getKey();
        const publicKey = crypt.getPublicKey();
        const privateKey = crypt.getPrivateKey();

        // Масив слів для квіза
        const quizWords = ["секрет", "код", "шифр", "таємниця", "загадка"];
        const quizEncryptedTexts = [];

        // Генерація зашифрованих слів для квіза
        quizWords.forEach((word, index) => {
            crypt.setPublicKey(publicKey);
            const encrypted = crypt.encrypt(word);
            quizEncryptedTexts.push(encrypted);
            document.getElementById(`quizEncrypted${index + 1}`).value = encrypted;
        });

        // Функція шифрування тексту
        function encrypt() {
            const inputText = document.getElementById('inputText').value;
            crypt.setPublicKey(publicKey);
            const encrypted = crypt.encrypt(inputText);
            document.getElementById('encryptedText').value = encrypted || 'Помилка шифрування';
        }

        // Функція розшифрування тексту
        function decrypt() {
            const encryptedText = document.getElementById('encryptedText').value;
            crypt.setPrivateKey(privateKey);
            const decrypted = crypt.decrypt(encryptedText);
            document.getElementById('decryptedText').value = decrypted || 'Помилка розшифрування';
        }

        // Перевірка всіх відповідей у квізі
        function checkQuizAnswers() {
            quizWords.forEach((word, index) => {
                const userAnswer = document.getElementById(`quizAnswer${index + 1}`).value.toLowerCase();
                const resultElement = document.getElementById(`quizResult${index + 1}`);
                if (userAnswer === word.toLowerCase()) {
                    resultElement.innerText = 'Правильно!';
                    resultElement.style.color = 'green';
                } else {
                    resultElement.innerText = 'Неправильно, спробуйте ще раз.';
                    resultElement.style.color = 'red';
                }
            });
        }

        // Копіювання зашифрованого тексту в буфер обміну
        function copyEncryptedText() {
            const encryptedText = document.getElementById('encryptedText').value;
            navigator.clipboard.writeText(encryptedText).then(() => {
                alert('Зашифрований текст скопійовано в буфер обміну!');
            }).catch(err => {
                alert('Не вдалося скопіювати текст: ' + err);
            });
        }
    </script>
</body>
</html>
